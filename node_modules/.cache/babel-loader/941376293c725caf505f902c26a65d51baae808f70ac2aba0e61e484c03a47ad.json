{"ast":null,"code":"import { apiToken, apiURL, groupId } from \"./constants\";\nexport class Api {\n  constructor(apiToken, groupId, apiURL) {\n    this._url = apiURL;\n    this._groupId = groupId;\n    this._headers = {\n      authorization: apiToken,\n      \"Content-Type\": \"application/json\"\n    };\n  }\n  _getResponse(res) {\n    if (res.ok) return res.json();\n    return Promise.reject(`ERROR: ${res.status}`);\n  }\n  getAppInfo() {\n    return Promise.all([this.getCard(), this.getUser()]);\n  }\n  getCard() {\n    return fetch(`${this._url}${this._groupId}/cards`, {\n      headers: this._headers\n    }).then(res => this._getResponse(res));\n  }\n  getUser() {\n    return fetch(`${this._url}${this._groupId}/users/me`, {\n      headers: this._headers\n    }).then(res => this._getResponse(res));\n  }\n  createCard({\n    name,\n    link\n  }) {\n    return fetch(`${this._url}${this._groupId}/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        link\n      })\n    }).then(this._getResponse);\n  }\n  updateUser({\n    name,\n    about\n  }) {\n    return fetch(`${this._url}${this._groupId}/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        about\n      })\n    }).then(this._getResponse);\n  }\n  deleteCard(cardId) {\n    return fetch(`${this._url}${this._groupId}/cards/${cardId}`, {\n      method: \"DELETE\",\n      headers: this._headers\n    }).then(this._getResponse);\n  }\n  async changeLikeCard(card, isLiked) {\n    const method = isLiked ? \"PUT\" : \"DELETE\";\n    return fetch(`${this._url}${this._groupId}/cards/${card}/likes`, {\n      method: method,\n      headers: this._headers\n    }).then(this._getResponse);\n  }\n  likeCard(card) {\n    return fetch(`${this._url}${this._groupId}/cards/${card}/likes`, {\n      method: \"PUT\",\n      headers: this._headers\n    }).then(this._getResponse);\n  }\n  removeCardLike(card) {\n    return fetch(`${this._url}${this._groupId}/cards/${card}/likes`, {\n      method: \"DELETE\",\n      headers: this._headers\n    }).then(this._getResponse);\n  }\n  updateUserAvatar({\n    avatar\n  }) {\n    return fetch(`${this._url}${this._groupId}/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar\n      })\n    }).then(this._getResponse);\n  }\n}\nconst api = new Api(apiToken, groupId, apiURL);\nexport default api;","map":{"version":3,"names":["apiToken","apiURL","groupId","Api","constructor","_url","_groupId","_headers","authorization","_getResponse","res","ok","json","Promise","reject","status","getAppInfo","all","getCard","getUser","fetch","headers","then","createCard","name","link","method","body","JSON","stringify","updateUser","about","deleteCard","cardId","changeLikeCard","card","isLiked","likeCard","removeCardLike","updateUserAvatar","avatar","api"],"sources":["/home/tryzo/app/yandexxx/mesto-react/src/utils/Api.js"],"sourcesContent":["import { apiToken, apiURL, groupId } from \"./constants\"\n\nexport class Api {\n  constructor (apiToken, groupId, apiURL) {\n    this._url = apiURL\n    this._groupId = groupId\n    this._headers = {\n      authorization: apiToken,\n      \"Content-Type\": \"application/json\"\n    }\n  }\n\n  _getResponse (res) {\n    if ( res.ok ) return res.json()\n    return Promise.reject(`ERROR: ${ res.status }`)\n  }\n\n  getAppInfo () {\n    return Promise.all([ this.getCard(), this.getUser() ])\n  }\n\n  getCard () {\n    return fetch(`${ this._url }${ this._groupId }/cards`, {\n      headers: this._headers\n    }).then(res => this._getResponse(res))\n  }\n\n  getUser () {\n    return fetch(`${ this._url }${ this._groupId }/users/me`, {\n      headers: this._headers\n    }).then(res => this._getResponse(res))\n  }\n\n  getLogin \n\n  createCard ({ name, link }) {\n    return fetch(`${ this._url }${ this._groupId }/cards`, {\n      method: \"POST\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        link\n      })\n    }).then(this._getResponse)\n  }\n\n  updateUser ({ name, about }) {\n    return fetch(`${ this._url }${ this._groupId }/users/me`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        name,\n        about\n      })\n    }).then(this._getResponse)\n  }\n\n  deleteCard (cardId) {\n    return fetch(`${ this._url }${ this._groupId }/cards/${ cardId }`, {\n      method: \"DELETE\",\n      headers: this._headers\n    }).then(this._getResponse)\n  }\n\n\n  async changeLikeCard (card, isLiked) {\n    const method = isLiked ? \"PUT\" : \"DELETE\"\n    return fetch(`${ this._url }${ this._groupId }/cards/${ card }/likes`,\n      {\n        method: method,\n        headers: this._headers\n      }\n    ).then(this._getResponse)\n  }\n\n  likeCard (card) {\n    return fetch(`${ this._url }${ this._groupId }/cards/${ card }/likes`, {\n      method: \"PUT\",\n      headers: this._headers\n    }).then(this._getResponse)\n  }\n\n  removeCardLike (card) {\n    return fetch(`${ this._url }${ this._groupId }/cards/${ card }/likes`, {\n      method: \"DELETE\",\n      headers: this._headers\n    }).then(this._getResponse)\n  }\n\n  updateUserAvatar ({ avatar }) {\n    return fetch(`${ this._url }${ this._groupId }/users/me/avatar`, {\n      method: \"PATCH\",\n      headers: this._headers,\n      body: JSON.stringify({\n        avatar\n      })\n    }).then(this._getResponse)\n  }\n}\n\nconst api = new Api(apiToken, groupId, apiURL)\n\nexport default api\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}